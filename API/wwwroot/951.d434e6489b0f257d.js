"use strict";(self.webpackChunkclient=self.webpackChunkclient||[]).push([[951],{951:(Qe,U,a)=>{a.r(U),a.d(U,{DatingModule:()=>we});var c=a(6895),v=a(9646),e=a(1571),M=a(4004),P=a(388);let N=(()=>{class n{constructor(t){this.bsModalRef=t,this.title="",this.message="",this.btnOkText="",this.btnCancelText="",this.result=!1}confirm(){this.result=!0,this.bsModalRef.hide()}decline(){this.bsModalRef.hide()}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(P.UZ))},n.\u0275cmp=e.Xpm({type:n,selectors:[["app-confirm-dialog"]],decls:11,vars:4,consts:[[1,"modal-header"],[1,"modal-title","pull-left"],[1,"modal-body"],[1,"modal-footer"],[1,"btn","btn-success",3,"click"],[1,"btn","btn-danger",3,"click"]],template:function(t,s){1&t&&(e.TgZ(0,"div",0)(1,"h4",1),e._uU(2),e.qZA()(),e.TgZ(3,"div",2)(4,"p"),e._uU(5),e.qZA()(),e.TgZ(6,"div",3)(7,"button",4),e.NdJ("click",function(){return s.confirm()}),e._uU(8),e.qZA(),e.TgZ(9,"button",5),e.NdJ("click",function(){return s.decline()}),e._uU(10),e.qZA()()),2&t&&(e.xp6(2),e.Oqu(s.title),e.xp6(3),e.Oqu(s.message),e.xp6(3),e.Oqu(s.btnOkText),e.xp6(2),e.Oqu(s.btnCancelText))}}),n})(),Q=(()=>{class n{constructor(t){this.modalService=t}confirm(t="Confirmation",s="Are you sure you want to do this?",i="Ok",r="Cancel"){return this.bsModalRef=this.modalService.show(N,{initialState:{title:t,message:s,btnOkText:i,btnCancelText:r}}),this.bsModalRef.onHidden.pipe((0,M.U)(()=>this.bsModalRef.content.result))}}return n.\u0275fac=function(t){return new(t||n)(e.LFG(P.tT))},n.\u0275prov=e.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),I=(()=>{class n{constructor(t){this.confirmService=t}canDeactivate(t){return t.memberForm?.dirty?this.confirmService.confirm("Unsaved changes","Are you sure you want to continue? Any unsaved changes will be lost.","Yes","No"):(0,v.of)(!0)}}return n.\u0275fac=function(t){return new(t||n)(e.LFG(Q))},n.\u0275prov=e.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();var g=a(9383);let S=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=e.Xpm({type:n,selectors:[["app-dating"]],decls:2,vars:0,template:function(t,s){1&t&&(e.TgZ(0,"p"),e._uU(1,"dating works!"),e.qZA())}}),n})();var p=a(2340),u=a(5698),q=a(5689);class J extends q.S{constructor(o){super(),this.minAge=14,this.maxAge=99,this.orderBy="lastActive",this.pageSize=5,this.gender="female"===o.gender?"male":"female"}}var C=a(529),Y=a(1118);function Z(n,o,t){const s=new Y.B;return t.get(n,{observe:"response",params:o}).pipe((0,M.U)(i=>{i.body&&(s.result=i.body);const r=i.headers.get("Pagination");return r&&(s.pagination=JSON.parse(r)),s}))}function T(n,o){let t=new C.LE;return t=t.append("pageNumber",n),t=t.append("pageSize",o),t}var h=a(9479);let d=(()=>{class n{constructor(t,s){this.http=t,this.accountService=s,this.baseUrl=p.N.apiUrl,this.members=[],this.memberCache=new Map,this.accountService.currentUser$.pipe((0,u.q)(1)).subscribe({next:i=>{i&&(this.userParams=new J(i),this.user=i)}})}getUserParams(){return this.userParams}setUserParams(t){this.userParams=t}resetUserParams(){if(this.user)return this.userParams=new J(this.user),this.userParams}getMembers(t){const s=this.memberCache.get(Object.values(t).join("-"));if(s)return(0,v.of)(s);let i=T(t.pageNumber,t.pageSize);return i=i.append("minAge",t.minAge),i=i.append("maxAge",t.maxAge),t.search&&(i=i.append("search",t.search)),i=i.append("gender",t.gender),i=i.append("orderBy",t.orderBy),Z(this.baseUrl+"users",i,this.http).pipe((0,M.U)(r=>(this.memberCache.set(Object.values(t).join("-"),r),r)))}getMember(t){const s=[...this.memberCache.values()].reduce((i,r)=>i.concat(r.result),[]).find(i=>i.email===t);return s?(0,v.of)(s):this.http.get(this.baseUrl+"users/"+t)}updateMember(t){return this.http.put(this.baseUrl+"users",t)}setMainPhoto(t){return this.http.put(this.baseUrl+"users/set-main-photo/"+t,{})}deletePhoto(t){return this.http.delete(this.baseUrl+"users/delete-photo/"+t)}addLike(t){return this.http.post(this.baseUrl+"likes/"+t,{})}getLikes(t,s,i){let r=T(s,i);return r=r.append("predicate",t),Z(this.baseUrl+"likes",r,this.http)}}return n.\u0275fac=function(t){return new(t||n)(e.LFG(C.eN),e.LFG(h.B))},n.\u0275prov=e.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();var x=a(2521),m=a(433),y=a(835),b=a(7185),O=a(6993);const D=function(){return{tab:"Messages"}};function H(n,o){if(1&n){const t=e.EpF();e.TgZ(0,"div",1)(1,"div",2),e._UZ(2,"img",3),e.TgZ(3,"ul",4)(4,"li",5)(5,"button",6),e._UZ(6,"i",7),e.qZA()(),e.TgZ(7,"li",5)(8,"button",8),e.NdJ("click",function(){e.CHM(t);const i=e.oxw();return e.KtG(i.addLike(i.member))}),e._UZ(9,"i",9),e.qZA()(),e.TgZ(10,"li",5)(11,"button",10),e._UZ(12,"i",11),e.qZA()()()(),e.TgZ(13,"div",12)(14,"h6",13)(15,"span"),e.ALo(16,"async"),e._UZ(17,"i",14),e.qZA(),e._uU(18),e.qZA(),e.TgZ(19,"p",15),e._uU(20),e.qZA()()()}if(2&n){const t=e.oxw();let s;e.xp6(2),e.s9C("src",t.member.photoUrl||"../../../../../assets/images/user.png",e.LSH),e.s9C("alt",t.member.displayName),e.xp6(3),e.MGl("routerLink","/dating/members/",t.member.email,""),e.xp6(6),e.MGl("routerLink","/dating/members/",t.member.email,""),e.Q6J("queryParams",e.DdM(12,D)),e.xp6(4),e.ekj("is-online",null==(s=e.lcZ(16,10,t.presenceService.onlineUsers$))?null:s.includes(t.member.email)),e.xp6(3),e.AsE(" ",t.member.displayName,", ",t.member.age," "),e.xp6(2),e.Oqu(null==t.member.address?null:t.member.address.city)}}let L=(()=>{class n{constructor(t,s,i,r){this.datingService=t,this.toastr=s,this.presenceService=i,this.router=r}addLike(t){this.datingService.addLike(t.email).subscribe({next:()=>this.toastr.success("You have liked "+t.displayName)})}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(d),e.Y36(b._W),e.Y36(O.Q),e.Y36(g.F0))},n.\u0275cmp=e.Xpm({type:n,selectors:[["app-member-card"]],inputs:{member:"member"},decls:1,vars:1,consts:[["class","card mb-4",4,"ngIf"],[1,"card","mb-4"],[1,"card-img-wrapper"],[1,"card-img-top",3,"src","alt"],[1,"list-inline","member-icons","animate","text-center"],[1,"list-inline-item"],[1,"btn","btn-primary",3,"routerLink"],[1,"fa","fa-user"],[1,"btn","btn-primary",3,"click"],[1,"fa","fa-heart"],[1,"btn","btn-primary",3,"routerLink","queryParams"],[1,"fa","fa-envelope"],[1,"card-body","p-1"],[1,"card-title","text-center","mb-1"],[1,"fa","fa-user","me-2"],[1,"card-text","text-muted","text-center"]],template:function(t,s){1&t&&e.YNc(0,H,21,13,"div",0),2&t&&e.Q6J("ngIf",s.member)},dependencies:[c.O5,g.rH,c.Ov],styles:[".card[_ngcontent-%COMP%]:hover   img[_ngcontent-%COMP%]{transform:scale(1.2);transition-duration:.5s;transition-timing-function:ease-out;opacity:.7}.card[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{transform:1,1;transition-duration:.5s;transition-timing-function:ease-out}.card-img-wrapper[_ngcontent-%COMP%]{overflow:hidden;position:relative}.member-icons[_ngcontent-%COMP%]{position:absolute;bottom:-30%;left:0;right:0;margin-left:auto;margin-right:auto;opacity:0}.card-img-wrapper[_ngcontent-%COMP%]:hover   .member-icons[_ngcontent-%COMP%]{bottom:0;opacity:1}.animate[_ngcontent-%COMP%]{transition:all .3s ease-in-out}@keyframes _ngcontent-%COMP%_fa-blink{0%{opacity:1}to{opacity:.4}}.is-online[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_fa-blink 1.5s linear infinite;color:#01bd2a}"]}),n})();const G=["search"];function R(n,o){if(1&n&&(e.TgZ(0,"option",24),e._uU(1),e.qZA()),2&n){const t=o.$implicit;e.Q6J("value",t.value),e.xp6(1),e.hij(" ",t.display," ")}}function B(n,o){if(1&n){const t=e.EpF();e.TgZ(0,"div",5)(1,"form",6,7),e.NdJ("ngSubmit",function(){e.CHM(t);const i=e.oxw();return e.KtG(i.loadMembers())}),e.TgZ(3,"div",8)(4,"label",9),e._uU(5,"Age From:"),e.qZA(),e.TgZ(6,"input",10),e.NdJ("ngModelChange",function(i){e.CHM(t);const r=e.oxw();return e.KtG(r.userParams.minAge=i)}),e.qZA()(),e.TgZ(7,"div",8)(8,"label",9),e._uU(9,"Age To:"),e.qZA(),e.TgZ(10,"input",11),e.NdJ("ngModelChange",function(i){e.CHM(t);const r=e.oxw();return e.KtG(r.userParams.maxAge=i)}),e.qZA()(),e.TgZ(11,"div",12)(12,"label",13),e._uU(13,"Show:"),e.qZA(),e.TgZ(14,"select",14),e.NdJ("ngModelChange",function(i){e.CHM(t);const r=e.oxw();return e.KtG(r.userParams.gender=i)}),e.YNc(15,R,2,2,"option",15),e.qZA()(),e._UZ(16,"input",16,17),e.TgZ(18,"button",18),e._uU(19,"Apply Filters"),e.qZA(),e.TgZ(20,"button",19),e.NdJ("click",function(){e.CHM(t);const i=e.oxw();return e.KtG(i.resetFilters())}),e._uU(21,"Reset Filters"),e.qZA(),e.TgZ(22,"div",20)(23,"div",21)(24,"button",22),e.NdJ("ngModelChange",function(i){e.CHM(t);const r=e.oxw();return e.KtG(r.userParams.orderBy=i)})("click",function(){e.CHM(t);const i=e.oxw();return e.KtG(i.loadMembers())}),e._uU(25,"Last Active"),e.qZA(),e.TgZ(26,"button",23),e.NdJ("ngModelChange",function(i){e.CHM(t);const r=e.oxw();return e.KtG(r.userParams.orderBy=i)})("click",function(){e.CHM(t);const i=e.oxw();return e.KtG(i.loadMembers())}),e._uU(27,"Newest"),e.qZA()()()()()}if(2&n){const t=e.oxw();e.xp6(6),e.Q6J("ngModel",t.userParams.minAge),e.xp6(4),e.Q6J("ngModel",t.userParams.maxAge),e.xp6(4),e.Q6J("ngModel",t.userParams.gender),e.xp6(1),e.Q6J("ngForOf",t.genderList),e.xp6(9),e.Q6J("ngModel",t.userParams.orderBy),e.xp6(2),e.Q6J("ngModel",t.userParams.orderBy)}}function E(n,o){if(1&n&&(e.TgZ(0,"div",25),e._UZ(1,"app-member-card",26),e.qZA()),2&n){const t=o.$implicit;e.xp6(1),e.Q6J("member",t)}}function z(n,o){if(1&n){const t=e.EpF();e.TgZ(0,"div",27)(1,"pagination",28),e.NdJ("pageChanged",function(i){e.CHM(t);const r=e.oxw();return e.KtG(r.pageChanged(i))}),e.qZA()()}if(2&n){const t=e.oxw();e.xp6(1),e.Q6J("boundaryLinks",!0)("totalItems",t.pagination.totalItems)("itemsPerPage",t.pagination.itemsPerPage)("maxSize",10)}}let $=(()=>{class n{constructor(t){this.datingService=t,this.members=[],this.genderList=[{value:"male",display:"Males"},{value:"female",display:"Females"}],this.userParams=this.datingService.getUserParams()}ngOnInit(){this.loadMembers()}loadMembers(){this.userParams&&(this.datingService.setUserParams(this.userParams),this.userParams.search=this.searchTerm?.nativeElement.value,this.datingService.getMembers(this.userParams).subscribe({next:t=>{t.result&&t.pagination&&(this.members=t.result,this.pagination=t.pagination)}}))}onSearch(){this.userParams&&(this.userParams.search=this.searchTerm?.nativeElement.value,this.userParams.pageNumber=1,this.loadMembers())}resetFilters(){this.searchTerm&&(this.searchTerm.nativeElement.value=""),this.userParams=this.datingService.resetUserParams(),this.loadMembers()}pageChanged(t){this.userParams&&this.userParams?.pageNumber!==t.page&&(this.userParams.pageNumber=t.page,this.datingService.setUserParams(this.userParams),this.loadMembers())}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(d))},n.\u0275cmp=e.Xpm({type:n,selectors:[["app-member-list"]],viewQuery:function(t,s){if(1&t&&e.Gf(G,5),2&t){let i;e.iGM(i=e.CRH())&&(s.searchTerm=i.first)}},decls:5,vars:3,consts:[["class","container mt-3",4,"ngIf"],[1,"container"],[1,"row"],["class","col-2",4,"ngFor","ngForOf"],["class","d-flex justify-content-center",4,"ngIf"],[1,"container","mt-3"],["autocomplete","off",1,"d-flex","mb-3",2,"align-items","center",3,"ngSubmit"],["form","ngForm"],[1,"d-flex","mx-1"],[1,"col-form-label"],["type","number","name","minAge",1,"form-control","ms-1",2,"width","70px",3,"ngModel","ngModelChange"],["type","number","name","maxAge",1,"form-control","ms-1",2,"width","70px",3,"ngModel","ngModelChange"],[1,"d-flex","px-2"],[1,"col-form-label","me-1"],["name","gender",1,"form-select","ms-1",2,"width","150px",3,"ngModel","ngModelChange"],[3,"value",4,"ngFor","ngForOf"],["type","text","placeholder","Name",1,"form-control",2,"width","200px"],["search",""],["type","submit",1,"btn","btn-outline-primary","ms-1"],["type","submit",1,"btn","btn-outline-danger","ms-1",3,"click"],[1,"col"],[1,"btn-group","float-end"],["type","button","name","orderBy","btnRadio","lastActive",1,"btn","btn-outline-primary",3,"ngModel","ngModelChange","click"],["type","button","name","orderBy","btnRadio","created",1,"btn","btn-outline-primary",3,"ngModel","ngModelChange","click"],[3,"value"],[1,"col-2"],[3,"member"],[1,"d-flex","justify-content-center"],["previousText","\u2039","nextText","\u203a","firstText","\xab","lastText","\xbb",3,"boundaryLinks","totalItems","itemsPerPage","maxSize","pageChanged"]],template:function(t,s){1&t&&(e.YNc(0,B,28,6,"div",0),e.TgZ(1,"div",1)(2,"div",2),e.YNc(3,E,2,1,"div",3),e.qZA()(),e.YNc(4,z,2,4,"div",4)),2&t&&(e.Q6J("ngIf",s.userParams),e.xp6(3),e.Q6J("ngForOf",s.members),e.xp6(1),e.Q6J("ngIf",s.pagination))},dependencies:[c.sg,c.O5,x.Qt,m._Y,m.YN,m.Kr,m.Fj,m.wV,m.EJ,m.JJ,m.JL,m.On,m.F,y.lz,L]}),n})();var k=a(9105),j=a(5861),K=a(5988),X=a(1135);let A=(()=>{class n{constructor(t){this.http=t,this.baseUrl=p.N.apiUrl,this.hubUrl=p.N.hubUrl,this.messageThreadSource=new X.X([]),this.messageThread$=this.messageThreadSource.asObservable()}createHubConnection(t,s){this.hubConnection=(new K.s).withUrl(this.hubUrl+"message?user="+s,{accessTokenFactory:()=>t.token}).withAutomaticReconnect().build(),this.hubConnection.start().catch(i=>console.log(i)),this.hubConnection.on("ReceiveMessageThread",i=>{this.messageThreadSource.next(i)}),this.hubConnection.on("UpdatedGroup",i=>{i.connections.some(r=>r.username===s)&&this.messageThread$.pipe((0,u.q)(1)).subscribe({next:r=>{r.forEach(l=>{l.dateRead||(l.dateRead=new Date(Date.now()))}),this.messageThreadSource.next([...r])}})}),this.hubConnection.on("NewMessage",i=>{this.messageThread$.pipe((0,u.q)(1)).subscribe({next:r=>{this.messageThreadSource.next([...r,i])}})})}stopHubConnection(){this.hubConnection&&this.hubConnection.stop()}getMessages(t){let s=T(t.pageNumber,t.pageSize);return s=s.append("Container",t.container),Z(this.baseUrl+"messages",s,this.http)}getMessageThread(t){return this.http.get(this.baseUrl+"messages/thread/"+t)}sendMessage(t,s){var i=this;return(0,j.Z)(function*(){return i.hubConnection?.invoke("SendMessage",{recipientUsername:t,content:s}).catch(r=>console.log(r))})()}deleteMessage(t){return this.http.delete(this.baseUrl+"messages/"+t)}}return n.\u0275fac=function(t){return new(t||n)(e.LFG(C.eN))},n.\u0275prov=e.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();var _=a(9241),f=a(5345);const W=["messageForm"];function V(n,o){1&n&&(e.TgZ(0,"div"),e._uU(1," No messages yet... "),e.qZA())}function ee(n,o){1&n&&(e.TgZ(0,"span",22),e._uU(1,"(unread)"),e.qZA())}function te(n,o){if(1&n&&(e.TgZ(0,"span",23),e._uU(1),e.ALo(2,"timeago"),e.qZA()),2&n){const t=e.oxw().$implicit;e.xp6(1),e.hij("(read ",e.lcZ(2,1,t.dateRead),")")}}function ne(n,o){if(1&n&&(e.TgZ(0,"li")(1,"div")(2,"span",14),e._UZ(3,"img",15),e.qZA(),e.TgZ(4,"div",16)(5,"div",17)(6,"small",18)(7,"span",19),e._uU(8),e.ALo(9,"timeago"),e.qZA(),e.YNc(10,ee,2,0,"span",20),e.YNc(11,te,3,3,"span",21),e.qZA()(),e.TgZ(12,"p"),e._uU(13),e.qZA()()()()),2&n){const t=o.$implicit,s=e.oxw(2);e.xp6(3),e.s9C("src",(null==t?null:t.senderPhotoUrl)||"../../../../../assets/images/user.png",e.LSH),e.xp6(5),e.Oqu(e.lcZ(9,5,t.messageSent)),e.xp6(2),e.Q6J("ngIf",!t.dateRead&&t.senderUsername!==s.username),e.xp6(1),e.Q6J("ngIf",t.dateRead&&t.senderUsername!==s.username),e.xp6(2),e.Oqu(t.content)}}function se(n,o){if(1&n&&(e.TgZ(0,"ul",11,12),e.YNc(2,ne,14,7,"li",13),e.ALo(3,"async"),e.qZA()),2&n){const t=e.MAs(1),s=e.oxw();e.Q6J("scrollTop",t.scrollHeight),e.xp6(2),e.Q6J("ngForOf",e.lcZ(3,2,s.messageService.messageThread$))}}let ie=(()=>{class n{constructor(t){this.messageService=t,this.messageContent=""}ngOnInit(){}sendMessage(){this.username&&this.messageService.sendMessage(this.username,this.messageContent).then(()=>{this.messageForm?.reset()})}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(A))},n.\u0275cmp=e.Xpm({type:n,selectors:[["app-member-messages"]],viewQuery:function(t,s){if(1&t&&e.Gf(W,5),2&t){let i;e.iGM(i=e.CRH())&&(s.messageForm=i.first)}},inputs:{username:"username"},decls:14,vars:8,consts:[[1,"card"],[1,"card-body"],[4,"ngIf"],["style","overflow: scroll; height: 500px;","class","chat",3,"scrollTop",4,"ngIf"],[1,"card-footer"],["autocomplete","off",3,"ngSubmit"],["messageForm","ngForm"],[1,"input-group"],["name","messageContent","required","","type","text","placeholder","Send a private message",1,"form-control","input-sm",3,"ngModel","ngModelChange"],[1,"input-group-append"],["type","submit",1,"btn","btn-primary",3,"disabled"],[1,"chat",2,"overflow","scroll","height","500px",3,"scrollTop"],["scrollContainer",""],[4,"ngFor","ngForOf"],[1,"chat-img","float-end"],["alt","image of user",1,"rounded-circle",3,"src"],[1,"chat-body"],[1,"header"],[1,"text-muted"],[1,"fa","fa-clock-o"],["class","text-danger",4,"ngIf"],["class","text-success",4,"ngIf"],[1,"text-danger"],[1,"text-success"]],template:function(t,s){if(1&t&&(e.TgZ(0,"div",0)(1,"div",1),e.YNc(2,V,2,0,"div",2),e.ALo(3,"async"),e.YNc(4,se,4,4,"ul",3),e.ALo(5,"async"),e.qZA(),e.TgZ(6,"div",4)(7,"form",5,6),e.NdJ("ngSubmit",function(){return s.sendMessage()}),e.TgZ(9,"div",7)(10,"input",8),e.NdJ("ngModelChange",function(r){return s.messageContent=r}),e.qZA(),e.TgZ(11,"div",9)(12,"button",10),e._uU(13,"Send"),e.qZA()()()()()()),2&t){const i=e.MAs(8);let r;e.xp6(2),e.Q6J("ngIf",0===(null==(r=e.lcZ(3,4,s.messageService.messageThread$))?null:r.length)),e.xp6(2),e.Q6J("ngIf",e.lcZ(5,6,s.messageService.messageThread$).length>0),e.xp6(6),e.Q6J("ngModel",s.messageContent),e.xp6(2),e.Q6J("disabled",!i.valid)}},dependencies:[c.sg,c.O5,m._Y,m.Fj,m.JJ,m.JL,m.Q7,m.On,m.F,c.Ov,f.wr],styles:[".card[_ngcontent-%COMP%]{border:none}.chat[_ngcontent-%COMP%]{list-style:none;margin:0;padding:0}.chat[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{margin-bottom:10px;padding-bottom:10px;border-bottom:1px dottet #b3a9a9}.rounded-circle[_ngcontent-%COMP%]{max-height:50px}"],changeDetection:0}),n})();const oe=["memberTabs"];function re(n,o){1&n&&(e.TgZ(0,"div",20),e._UZ(1,"i",21),e._uU(2," Online now "),e.qZA())}let ae=(()=>{class n{constructor(t,s,i,r,l,Fe,Ne){this.accountService=t,this.activatedRoute=s,this.messageService=i,this.presenceService=r,this.router=l,this.datingService=Fe,this.toastr=Ne,this.member={},this.galleryOptions=[],this.galleryImages=[],this.messages=[],this.accountService.currentUser$.subscribe({next:F=>{F&&(this.user=F)}}),this.router.routeReuseStrategy.shouldReuseRoute=()=>!1}ngOnInit(){this.activatedRoute.data.subscribe({next:t=>this.member=t.member}),this.activatedRoute.queryParams.subscribe({next:t=>t.tab&&this.selectTab(t.tab)}),this.galleryOptions=[{width:"500px",height:"500px",imagePercent:100,thumbnailsColumns:4,imageAnimation:k.zw.Slide,preview:!1}],this.galleryImages=this.getImages()}ngOnDestroy(){this.messageService.stopHubConnection(),this.router.navigate([],{queryParams:{tab:null},queryParamsHandling:"merge",replaceUrl:!0})}loadMessages(){this.member&&this.messageService.getMessageThread(this.member.email).subscribe({next:t=>this.messages=t})}selectTab(t){this.memberTabs&&(this.memberTabs.tabs.find(s=>s.heading===t).active=!0)}onTabActivated(t){this.activeTab=t,"Messages"===this.activeTab.heading&&this.user?this.messageService.createHubConnection(this.user,this.member.email):this.messageService.stopHubConnection()}getImages(){if(!this.member)return[];const t=[];for(const s of this.member.photos)t.push({small:s?.url,medium:s?.url,big:s?.url});return t}addLike(t){this.datingService.addLike(t.email).subscribe({next:()=>this.toastr.success("You have liked "+t.displayName)})}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(h.B),e.Y36(g.gz),e.Y36(A),e.Y36(O.Q),e.Y36(g.F0),e.Y36(d),e.Y36(b._W))},n.\u0275cmp=e.Xpm({type:n,selectors:[["app-member-detail"]],viewQuery:function(t,s){if(1&t&&e.Gf(oe,7),2&t){let i;e.iGM(i=e.CRH())&&(s.memberTabs=i.first)}},decls:57,vars:21,consts:[[1,"container","mt-3"],[1,"row"],[1,"col-3"],[1,"card"],[1,"card-img-top","img-thumbnail",3,"src","alt"],[1,"card-body"],["class","mb-2",4,"ngIf"],[1,"card-footer"],[1,"btn-group","d-flex"],[1,"btn","btn-primary",3,"click"],[1,"btn","btn-success",3,"click"],[1,"col-8"],[1,"member-tabset"],["memberTabs",""],[3,"heading","selectTab"],["heading","Interests",3,"selectTab"],["heading","Photos",3,"selectTab"],[1,"ngx-gallery",3,"options","images"],["heading","Messages",3,"selectTab"],[3,"username"],[1,"mb-2"],[1,"class","fa","fa-user-circle","text-success"]],template:function(t,s){if(1&t&&(e.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3),e._UZ(4,"img",4),e.TgZ(5,"div",5),e.YNc(6,re,3,0,"div",6),e.ALo(7,"async"),e.TgZ(8,"div")(9,"strong"),e._uU(10,"Location:"),e.qZA(),e.TgZ(11,"p"),e._uU(12),e.qZA()(),e.TgZ(13,"div")(14,"strong"),e._uU(15,"Age:"),e.qZA(),e.TgZ(16,"p"),e._uU(17),e.qZA()(),e.TgZ(18,"div")(19,"strong"),e._uU(20,"Last Active:"),e.qZA(),e.TgZ(21,"p"),e._uU(22),e.ALo(23,"timeago"),e.qZA()(),e.TgZ(24,"div")(25,"strong"),e._uU(26,"Member Since:"),e.qZA(),e.TgZ(27,"p"),e._uU(28),e.ALo(29,"date"),e.qZA()()(),e.TgZ(30,"div",7)(31,"div",8)(32,"button",9),e.NdJ("click",function(){return s.addLike(s.member)}),e._uU(33,"Like"),e.qZA(),e.TgZ(34,"button",10),e.NdJ("click",function(){return s.selectTab("Messages")}),e._uU(35,"Messages"),e.qZA()()()()(),e.TgZ(36,"div",11)(37,"tabset",12,13)(39,"tab",14),e.NdJ("selectTab",function(r){return s.onTabActivated(r)}),e.TgZ(40,"h5"),e._uU(41,"Description"),e.qZA(),e.TgZ(42,"p"),e._uU(43),e.qZA(),e.TgZ(44,"h5"),e._uU(45,"Looking For"),e.qZA(),e.TgZ(46,"p"),e._uU(47),e.qZA()(),e.TgZ(48,"tab",15),e.NdJ("selectTab",function(r){return s.onTabActivated(r)}),e.TgZ(49,"h5"),e._uU(50,"Interests"),e.qZA(),e.TgZ(51,"p"),e._uU(52),e.qZA()(),e.TgZ(53,"tab",16),e.NdJ("selectTab",function(r){return s.onTabActivated(r)}),e._UZ(54,"ngx-gallery",17),e.qZA(),e.TgZ(55,"tab",18),e.NdJ("selectTab",function(r){return s.onTabActivated(r)}),e._UZ(56,"app-member-messages",19),e.qZA()()()()()),2&t){let i;e.xp6(4),e.s9C("src",s.member.photoUrl||"../../../../../assets/images/user.png",e.LSH),e.s9C("alt",s.member.displayName),e.xp6(2),e.Q6J("ngIf",null==(i=e.lcZ(7,14,s.presenceService.onlineUsers$))?null:i.includes(s.member.email)),e.xp6(6),e.Oqu(s.member.address.city),e.xp6(5),e.Oqu(s.member.age),e.xp6(5),e.Oqu(e.lcZ(23,16,s.member.lastActive)),e.xp6(6),e.Oqu(e.xi3(29,18,s.member.created,"dd MMMM yyyy")),e.xp6(11),e.MGl("heading","About ",s.member.displayName,""),e.xp6(4),e.Oqu(s.member.introduction),e.xp6(4),e.Oqu(s.member.lookingFor),e.xp6(5),e.Oqu(s.member.interests),e.xp6(2),e.Q6J("options",s.galleryOptions)("images",s.galleryImages),e.xp6(2),e.Q6J("username",s.member.email)}},dependencies:[c.O5,_.wW,_.AH,k.g$,ie,c.Ov,c.uU,f.wr],styles:[".img-thumbnail[_ngcontent-%COMP%]{margin:25px;width:70%;height:70%}.card-body[_ngcontent-%COMP%]{padding:0 25px}.card-footer[_ngcontent-%COMP%]{padding:10px 15px;background-color:#fff;border-top:none}.ngx-gallery[_ngcontent-%COMP%]{display:inline-block;margin-bottom:20px}"]}),n})();function me(n,o){if(1&n&&(e.TgZ(0,"div",8),e._UZ(1,"app-member-card",9),e.qZA()),2&n){const t=o.$implicit;e.xp6(1),e.Q6J("member",t)}}function ce(n,o){if(1&n){const t=e.EpF();e.TgZ(0,"div",10)(1,"pagination",11),e.NdJ("pageChanged",function(i){e.CHM(t);const r=e.oxw();return e.KtG(r.pageChanged(i))}),e.qZA()()}if(2&n){const t=e.oxw();e.xp6(1),e.Q6J("boundaryLinks",!0)("totalItems",t.pagination.totalItems)("itemsPerPage",t.pagination.itemsPerPage)("maxSize",10)}}let le=(()=>{class n{constructor(t){this.datingService=t,this.predicate="liked",this.pageNumber=1,this.pageSize=5}ngOnInit(){this.loadLikes()}loadLikes(){this.datingService.getLikes(this.predicate,this.pageNumber,this.pageSize).subscribe({next:t=>{this.members=t.result,this.pagination=t.pagination}})}pageChanged(t){this.pageNumber!==t.page&&(this.pageNumber=t.page,this.loadLikes())}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(d))},n.\u0275cmp=e.Xpm({type:n,selectors:[["app-lists"]],decls:10,vars:4,consts:[[1,"container","mt-3"],[1,"d-flex"],["name","predicate",1,"btn-group"],["btnRadio","liked",1,"btn","btn-primary",3,"ngModel","ngModelChange","click"],["btnRadio","likedBy",1,"btn","btn-primary",3,"ngModel","ngModelChange","click"],[1,"row","mt-3"],["class","col-2",4,"ngFor","ngForOf"],["class","d-flex justify-content-center",4,"ngIf"],[1,"col-2"],[3,"member"],[1,"d-flex","justify-content-center"],["previousText","\u2039","nextText","\u203a","firstText","\xab","lastText","\xbb",3,"boundaryLinks","totalItems","itemsPerPage","maxSize","pageChanged"]],template:function(t,s){1&t&&(e.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"button",3),e.NdJ("ngModelChange",function(r){return s.predicate=r})("click",function(){return s.loadLikes()}),e._uU(4,"Members I Like"),e.qZA(),e.TgZ(5,"button",4),e.NdJ("ngModelChange",function(r){return s.predicate=r})("click",function(){return s.loadLikes()}),e._uU(6,"Members Who Like Me"),e.qZA()()(),e.TgZ(7,"div",5),e.YNc(8,me,2,1,"div",6),e.qZA()(),e.YNc(9,ce,2,4,"div",7)),2&t&&(e.xp6(3),e.Q6J("ngModel",s.predicate),e.xp6(2),e.Q6J("ngModel",s.predicate),e.xp6(3),e.Q6J("ngForOf",s.members),e.xp6(1),e.Q6J("ngIf",s.pagination))},dependencies:[c.sg,c.O5,x.Qt,m.JJ,m.On,y.lz,L]}),n})();class ge extends q.S{constructor(){super(...arguments),this.container="Unread"}}function de(n,o){1&n&&(e.TgZ(0,"div",11)(1,"h3"),e._uU(2,"No messages"),e.qZA()())}function ue(n,o){if(1&n&&(e.TgZ(0,"div"),e._UZ(1,"img",20),e.TgZ(2,"strong"),e._uU(3),e.ALo(4,"titlecase"),e.qZA()()),2&n){const t=e.oxw().$implicit;e.xp6(1),e.s9C("src",t.recipientPhotoUrl||"../../../../../assets/images/user.png",e.LSH),e.xp6(2),e.Oqu(e.lcZ(4,2,t.recipientUsername))}}function pe(n,o){if(1&n&&(e.TgZ(0,"div"),e._UZ(1,"img",21),e.TgZ(2,"strong"),e._uU(3),e.ALo(4,"titlecase"),e.qZA()()),2&n){const t=e.oxw().$implicit;e.xp6(1),e.s9C("src",t.senderPhotoUrl||"../../../../../assets/images/user.png",e.LSH),e.xp6(2),e.Oqu(e.lcZ(4,2,t.senderUsername))}}const he=function(){return{tab:"Messages"}};function be(n,o){if(1&n){const t=e.EpF();e.TgZ(0,"tr",17)(1,"td"),e._uU(2),e.qZA(),e.TgZ(3,"td"),e.YNc(4,ue,5,4,"div",18),e.YNc(5,pe,5,4,"div",18),e.qZA(),e.TgZ(6,"td"),e._uU(7),e.ALo(8,"timeago"),e.qZA(),e.TgZ(9,"td")(10,"button",19),e.NdJ("click",function(i){return i.stopPropagation()})("click",function(){const r=e.CHM(t).$implicit,l=e.oxw(2);return e.KtG(l.deleteMessage(r.id))}),e._uU(11,"Delete"),e.qZA()()()}if(2&n){const t=o.$implicit,s=e.oxw(2);e.s9C("routerLink","Outbox"===s.messageParams.container?"/dating/members/"+t.recipientUsername:"/dating/members/"+t.senderUsername),e.Q6J("hidden",s.loading)("queryParams",e.DdM(9,he)),e.xp6(2),e.Oqu(t.content),e.xp6(2),e.Q6J("ngIf","Outbox"===s.messageParams.container),e.xp6(1),e.Q6J("ngIf","Outbox"!==s.messageParams.container),e.xp6(2),e.Oqu(e.lcZ(8,7,t.messageSent))}}function _e(n,o){if(1&n&&(e.TgZ(0,"div",11)(1,"table",12)(2,"thead")(3,"tr")(4,"th",13),e._uU(5,"Message"),e.qZA(),e.TgZ(6,"th",14),e._uU(7,"From / To"),e.qZA(),e.TgZ(8,"th",14),e._uU(9,"Sent / Received"),e.qZA(),e._UZ(10,"th",14),e.qZA()(),e.TgZ(11,"tbody",15),e.YNc(12,be,12,10,"tr",16),e.qZA()()()),2&n){const t=e.oxw();e.xp6(12),e.Q6J("ngForOf",t.messages)}}function fe(n,o){if(1&n){const t=e.EpF();e.TgZ(0,"div",22)(1,"pagination",23),e.NdJ("pageChanged",function(i){e.CHM(t);const r=e.oxw();return e.KtG(r.pageChanged(i))}),e.qZA()()}if(2&n){const t=e.oxw();e.xp6(1),e.Q6J("boundaryLinks",!0)("totalItems",t.pagination.totalItems)("itemsPerPage",t.pagination.itemsPerPage)("maxSize",10)}}let ve=(()=>{class n{constructor(t){this.messageService=t,this.messageParams=new ge,this.loading=!1}ngOnInit(){this.loadMessages()}loadMessages(){this.loading=!0,this.messageService.getMessages(this.messageParams).subscribe({next:t=>{this.messages=t.result,this.pagination=t.pagination,this.loading=!1}})}deleteMessage(t){this.messageService.deleteMessage(t).subscribe({next:()=>this.messages?.splice(this.messages.findIndex(s=>s.id===t),1)})}pageChanged(t){this.messageParams.pageNumber!==t.page&&(this.messageParams.pageNumber=t.page,this.loadMessages())}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(A))},n.\u0275cmp=e.Xpm({type:n,selectors:[["app-messages"]],decls:12,vars:6,consts:[[1,"container","mt-3"],[1,"mb-4","d-flex"],["name","container",1,"btn-group"],["btnRadio","Unread",1,"btn","btn-primary",3,"ngModel","ngModelChange","click"],[1,"fa","fa-envelope"],["btnRadio","Inbox",1,"btn","btn-primary",3,"ngModel","ngModelChange","click"],[1,"fa","fa-envelope-open"],["btnRadio","Outbox",1,"btn","btn-primary",3,"ngModel","ngModelChange","click"],[1,"fa","fa-paper-plane"],["class","row",4,"ngIf"],["class","d-flex justify-content-center",4,"ngIf"],[1,"row"],[1,"table","table-hover",2,"cursor","pointer"],[2,"width","40%"],[2,"width","20%"],[1,"allign-middle"],[3,"hidden","routerLink","queryParams",4,"ngFor","ngForOf"],[3,"hidden","routerLink","queryParams"],[4,"ngIf"],[1,"btn","btn-danger",3,"click"],["alt","recipient photo",1,"img-circle","rounded-circle","me-2",3,"src"],["alt","sender photo",1,"img-circle","rounded-circle","me-2",3,"src"],[1,"d-flex","justify-content-center"],["previousText","\u2039","nextText","\u203a","firstText","\xab","lastText","\xbb",3,"boundaryLinks","totalItems","itemsPerPage","maxSize","pageChanged"]],template:function(t,s){1&t&&(e.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"button",3),e.NdJ("ngModelChange",function(r){return s.messageParams.container=r})("click",function(){return s.loadMessages()}),e._UZ(4,"i",4),e.qZA(),e.TgZ(5,"button",5),e.NdJ("ngModelChange",function(r){return s.messageParams.container=r})("click",function(){return s.loadMessages()}),e._UZ(6,"i",6),e.qZA(),e.TgZ(7,"button",7),e.NdJ("ngModelChange",function(r){return s.messageParams.container=r})("click",function(){return s.loadMessages()}),e._UZ(8,"i",8),e.qZA()()(),e.YNc(9,de,3,0,"div",9),e.YNc(10,_e,13,1,"div",9),e.qZA(),e.YNc(11,fe,2,4,"div",10)),2&t&&(e.xp6(3),e.Q6J("ngModel",s.messageParams.container),e.xp6(2),e.Q6J("ngModel",s.messageParams.container),e.xp6(2),e.Q6J("ngModel",s.messageParams.container),e.xp6(2),e.Q6J("ngIf",!s.messages||0===s.messages.length),e.xp6(1),e.Q6J("ngIf",s.messages&&s.messages.length>0),e.xp6(1),e.Q6J("ngIf",!s.loading&&s.pagination&&s.messages&&s.messages.length>0))},dependencies:[c.sg,c.O5,g.rH,x.Qt,m.JJ,m.On,y.lz,c.rS,f.wr],styles:[".img-circle[_ngcontent-%COMP%]{max-height:50px}"]}),n})();var Me=a(7574),Ce=a(4015),w=a(1129);function Ze(n,o){1&n&&(e.TgZ(0,"div",15)(1,"span",16),e._uU(2,"Awaiting approval"),e.qZA()())}function Te(n,o){if(1&n){const t=e.EpF();e.TgZ(0,"div",8),e._UZ(1,"img",9),e.YNc(2,Ze,3,0,"div",10),e.TgZ(3,"div",11)(4,"button",12),e.NdJ("click",function(){const r=e.CHM(t).$implicit,l=e.oxw(2);return e.KtG(l.setMainPhoto(r))}),e._uU(5,"Main"),e.qZA(),e.TgZ(6,"button",13),e.NdJ("click",function(){const r=e.CHM(t).$implicit,l=e.oxw(2);return e.KtG(l.deletePhoto(r.id))}),e._UZ(7,"i",14),e.qZA()()()}if(2&n){const t=o.$implicit;e.xp6(1),e.ekj("not-approved",!t.isApproved),e.s9C("src",t.url,e.LSH),e.xp6(1),e.Q6J("ngIf",!t.isApproved),e.xp6(2),e.Q6J("disabled",t.isMain||!t.isApproved)("ngClass",t.isMain?"btn-success actuve":"btn-outline-success"),e.xp6(2),e.Q6J("disabled",t.isMain)}}function xe(n,o){if(1&n&&(e.TgZ(0,"div",6),e.YNc(1,Te,8,7,"div",7),e.qZA()),2&n){const t=e.oxw();e.xp6(1),e.Q6J("ngForOf",t.member.photos)}}const ye=function(n){return{width:n}};function Ae(n,o){if(1&n&&(e.TgZ(0,"div",17)(1,"div")(2,"div"),e._uU(3," Queue progress: "),e.TgZ(4,"div",18),e._UZ(5,"div",19),e.qZA()()()()),2&n){const t=e.oxw();e.xp6(5),e.Q6J("ngStyle",e.VKq(1,ye,(null==t.uploader?null:t.uploader.progress)+"%"))}}let Ue=(()=>{class n{constructor(t,s,i){this.accountService=t,this.datingService=s,this.toastr=i,this.hasBaseDropzoneOver=!1,this.baseUrl=p.N.apiUrl,this.accountService.currentUser$.pipe((0,u.q)(1)).subscribe({next:r=>{r&&(this.user=r)}})}ngOnInit(){this.initializeUploader()}setMainPhoto(t){this.datingService.setMainPhoto(t.id).subscribe({next:()=>{this.user&&this.member&&(this.user.photoUrl=t.url,this.accountService.setCurrentUser(this.user),this.toastr.success("Main photo updated successfully."),this.member.photoUrl=t.url,this.member.photos.forEach(s=>{s.isMain&&(s.isMain=!1),s.id===t.id&&(s.isMain=!0)}))}})}deletePhoto(t){this.datingService.deletePhoto(t).subscribe({next:()=>{this.member&&(this.member.photos=this.member.photos.filter(s=>s.id!==t),this.toastr.success("Photo deleted successfully."))}})}fileOverBase(t){this.hasBaseDropzoneOver=t}initializeUploader(){this.uploader=new w.bA({url:this.baseUrl+"users/add-photo",authToken:"Bearer "+this.user?.token,isHTML5:!0,allowedFileType:["image"],removeAfterUpload:!0,autoUpload:!0,maxFileSize:10485760}),this.uploader.onAfterAddingFile=t=>{t.withCredentials=!1},this.uploader.onSuccessItem=(t,s,i,r)=>{if(s){const l=JSON.parse(s);this.member?.photos.push(l),this.toastr.success("Photo uploaded successfully. Please be patient until the admin approves it."),l.isMain&&this.user&&this.member&&(this.user.photoUrl=l.url,this.member.photoUrl=l.url,this.accountService.setCurrentUser(this.user))}}}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(h.B),e.Y36(d),e.Y36(b._W))},n.\u0275cmp=e.Xpm({type:n,selectors:[["app-photo-editor"]],inputs:{member:"member"},decls:9,vars:3,consts:[["class","row mb-3",4,"ngIf"],[1,"row","mt-3"],[1,"col-3"],["for","file-input",1,"btn","btn-primary"],["id","file-input","type","file","ng2FileSelect","",2,"display","none",3,"uploader"],["class","col-9","style","margin-bottom: 40px",4,"ngIf"],[1,"row","mb-3"],["class","col-2 mb-1 img-wrapper",4,"ngFor","ngForOf"],[1,"col-2","mb-1","img-wrapper"],["alt","Photo of user",1,"img-thumbnail","mb-1",3,"src"],["class","text-center img-text",4,"ngIf"],[1,"text-center"],[1,"btn","btn-sm",3,"disabled","ngClass","click"],[1,"btn","btn-sm","btn-danger",3,"disabled","click"],[1,"fa","fa-trash"],[1,"text-center","img-text"],[1,"text-danger"],[1,"col-9",2,"margin-bottom","40px"],[1,"progress"],["role","progressbar",1,"progress-bar",3,"ngStyle"]],template:function(t,s){1&t&&(e.YNc(0,xe,2,1,"div",0),e.TgZ(1,"div",1)(2,"div",2)(3,"h3"),e._uU(4,"Add Photos"),e.qZA(),e.TgZ(5,"label",3),e._uU(6,"Choose file"),e.qZA(),e._UZ(7,"input",4),e.qZA(),e.YNc(8,Ae,6,3,"div",5),e.qZA()),2&t&&(e.Q6J("ngIf",s.member),e.xp6(7),e.Q6J("uploader",s.uploader),e.xp6(1),e.Q6J("ngIf",null==s.uploader||null==s.uploader.queue?null:s.uploader.queue.length))},dependencies:[c.mk,c.sg,c.O5,c.PC,w.C6],styles:[".nv-file-over[_ngcontent-%COMP%]{border:dotted 3px red}input[type=file][_ngcontent-%COMP%]{color:transparent}.not-approved[_ngcontent-%COMP%]{opacity:.2}.img-wrapper[_ngcontent-%COMP%]{position:relative}.img-text[_ngcontent-%COMP%]{position:absolute;left:0;right:0;margin-left:auto;margin-right:auto;bottom:30%}"]}),n})();function Pe(n,o){1&n&&(e.TgZ(0,"div",6)(1,"p")(2,"strong"),e._uU(3,"Information: "),e.qZA(),e._uU(4,"You have made changes. Any unsaved changes will be lost"),e.qZA()())}function Se(n,o){if(1&n){const t=e.EpF();e.TgZ(0,"div",1)(1,"div",2)(2,"div",7),e._UZ(3,"img",8),e.TgZ(4,"div",9)(5,"div")(6,"strong"),e._uU(7,"Location:"),e.qZA(),e.TgZ(8,"p"),e._uU(9),e.qZA()(),e.TgZ(10,"div")(11,"strong"),e._uU(12,"Age:"),e.qZA(),e.TgZ(13,"p"),e._uU(14),e.qZA()(),e.TgZ(15,"div")(16,"strong"),e._uU(17,"Last Active:"),e.qZA(),e.TgZ(18,"p"),e._uU(19),e.ALo(20,"timeago"),e.qZA()(),e.TgZ(21,"div")(22,"strong"),e._uU(23,"Member Since:"),e.qZA(),e.TgZ(24,"p"),e._uU(25),e.ALo(26,"date"),e.qZA()()(),e.TgZ(27,"div",10)(28,"button",11),e._uU(29,"Save Changes"),e.qZA()()()(),e.TgZ(30,"div",3)(31,"tabset",12)(32,"tab",13)(33,"form",14),e.NdJ("ngSubmit",function(){e.CHM(t);const i=e.oxw();return e.KtG(i.updateMember())}),e.TgZ(34,"h5",15),e._uU(35,"Description"),e.qZA(),e._UZ(36,"textarea",16),e.TgZ(37,"h5",15),e._uU(38,"Looking For"),e.qZA(),e._UZ(39,"textarea",17),e.TgZ(40,"h5",15),e._uU(41,"Interests"),e.qZA(),e._UZ(42,"textarea",18),e.TgZ(43,"h5",15),e._uU(44,"Locations Details: "),e.qZA(),e.TgZ(45,"div",19),e._UZ(46,"app-text-input",20)(47,"app-text-input",20),e.qZA()()(),e.TgZ(48,"tab",21),e._UZ(49,"app-photo-editor",22),e.qZA()()()()}if(2&n){const t=e.oxw();e.xp6(3),e.s9C("src",t.member.photoUrl||"../../../../../assets/images/user.png",e.LSH),e.s9C("alt",t.member.displayName),e.xp6(6),e.Oqu(t.member.address.city),e.xp6(5),e.Oqu(t.member.age),e.xp6(5),e.Oqu(e.lcZ(20,13,t.member.lastActive)),e.xp6(6),e.Oqu(e.xi3(26,15,t.member.created,"dd MMMM yyyy")),e.xp6(3),e.Q6J("disabled",!t.memberForm.dirty),e.xp6(5),e.Q6J("formGroup",t.memberForm),e.xp6(13),e.Q6J("formControl",t.memberForm.controls.city)("label","City"),e.xp6(1),e.Q6J("formControl",t.memberForm.controls.country)("label","Country"),e.xp6(2),e.Q6J("member",t.member)}}let qe=(()=>{class n{unloadNotification(t){this.memberForm.dirty&&(t.returnValue=!0)}constructor(t,s,i,r){this.fb=t,this.accountService=s,this.datingService=i,this.toastr=r,this.memberForm=this.fb.group({introduction:[""],lookingFor:[""],interests:[""],city:[""],country:[""]}),this.user=null,this.accountService.currentUser$.pipe((0,u.q)(1)).subscribe({next:l=>this.user=l})}ngOnInit(){this.loadMember()}updateMember(){this.datingService.updateMember(this.memberForm.value).subscribe({next:t=>{this.member={...this.member,...t},this.toastr.success("Profile updated successfully"),this.memberForm?.reset(t)}})}loadMember(){this.user&&this.datingService.getMember(this.user.email).subscribe({next:t=>{this.member=t,this.memberForm.patchValue(t),this.memberForm?.get("city")?.setValue(t.address?.city),this.memberForm?.get("country")?.setValue(t.address?.country)}})}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(m.qu),e.Y36(h.B),e.Y36(d),e.Y36(b._W))},n.\u0275cmp=e.Xpm({type:n,selectors:[["app-member-edit"]],hostBindings:function(t,s){1&t&&e.NdJ("beforeunload",function(r){return s.unloadNotification(r)},!1,e.Jf7)},decls:8,vars:2,consts:[[1,"container","mt-3"],[1,"row"],[1,"col-3"],[1,"col-8"],["class","alert alert-info",4,"ngIf"],["class","row",4,"ngIf"],[1,"alert","alert-info"],[1,"card",2,"width","18rem"],[1,"card-img-top","img-thumbnail",3,"src","alt"],[1,"card-body"],[1,"card-footer"],["form","editForm",1,"btn","btn-success","col-12",3,"disabled"],[1,"member-tabset"],["heading","About"],["id","editForm",3,"formGroup","ngSubmit"],[1,"mt-2"],["formControlName","introduction","name","introduction","rows","3",1,"form-control"],["formControlName","lookingFor","name","lookingFor","rows","2",1,"form-control"],["formControlName","interests","name","interests","rows","2",1,"form-control"],[1,"d-flex","flex-row","align-items-center"],[3,"formControl","label"],["heading","Edit Photos"],[3,"member"]],template:function(t,s){1&t&&(e.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"h2"),e._uU(4,"Your Profile"),e.qZA()(),e.TgZ(5,"div",3),e.YNc(6,Pe,5,0,"div",4),e.qZA()(),e.YNc(7,Se,50,18,"div",5),e.qZA()),2&t&&(e.xp6(6),e.Q6J("ngIf",s.memberForm.dirty),e.xp6(1),e.Q6J("ngIf",s.member))},dependencies:[c.O5,m._Y,m.Fj,m.JJ,m.JL,m.oH,m.sg,m.u,Ce.t,_.wW,_.AH,Ue,c.uU,f.wr],styles:[".img-thumbnail[_ngcontent-%COMP%]{margin:25px;width:70%;height:70%}.card-body[_ngcontent-%COMP%]{padding:0 25px}.card-footer[_ngcontent-%COMP%]{padding:10px 15px;background-color:#fff;border-top:none}"]}),n})();const Oe=[{path:"",component:S},{path:"",runGuardsAndResolvers:"always",canActivate:[Me.a],children:[{path:"members",component:$},{path:"members/:email",component:ae,resolve:{member:(()=>{class n{constructor(t){this.datingService=t}resolve(t){return this.datingService.getMember(t.paramMap.get("email"))}}return n.\u0275fac=function(t){return new(t||n)(e.LFG(d))},n.\u0275prov=e.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})()}},{path:"member/edit",component:qe,canDeactivate:[I]},{path:"lists",component:le},{path:"messages",component:ve}]},{path:"**",component:S,pathMatch:"full"}];let Le=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=e.oAB({type:n}),n.\u0275inj=e.cJS({imports:[g.Bz.forChild(Oe),g.Bz]}),n})();var ke=a(4466);let we=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=e.oAB({type:n}),n.\u0275inj=e.cJS({imports:[c.ez,Le,ke.m]}),n})()}}]);